<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Posts</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="/favicon.png" type="image/png">

</head>
<body>
    <div class="container">
        <h1>Instagram Clone</h1>
        <a href="/posts/new">Create New Post</a>
        <hr>

        <% posts.forEach(post => { %>
            <div class="post">
                <h3><%= post.username %></h3>
                <p><%= post.content %></p>

                <% if(post.image) { %>
                    <img src="/uploads/<%= post.image %>" alt="Post Image" style="max-width: 400px;">
                <% } %>

                <p>Likes: <%= post.likes %></p>
                <a href="/posts/<%= post.id %>/edit">Edit</a>
                <p>
    <form action="/posts/<%= post.id %>/like?_method=PATCH" method="POST" style="display:inline;">
        <button type="submit" style="background:none;border:none;cursor:pointer;font-size:18px;color:red;">❤️</button>
    </form>
    <%= post.likes %> Likes
</p>
<div class="comments">
    <% if(post.comments) { %>
        <% post.comments.forEach(comment => { %>
            <p><strong><%= comment.username %>:</strong> <%= comment.text %></p>
        <% }) %>
    <% } %>

    <form action="/posts/<%= post.id %>/comments" method="POST">
        <input type="text" name="username" placeholder="Your name" required>
        <input type="text" name="text" placeholder="Add a comment..." required>
        <button type="submit">Comment</button>
    </form>
</div>


            </div>
            <hr>
        <% }) %>
    </div>
</body>
</html>
